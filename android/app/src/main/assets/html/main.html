<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML>
<HEAD>
	<TITLE>知途 > 主页</TITLE>
	<link rel="stylesheet" type="text/css" href="css/mint.min.css" />
	<link rel="stylesheet" type="text/css" href="css/muse-ui.css" />
	<link rel="stylesheet" type="text/css" href="css/muse-ui-toast.all.css" />
	<link rel="stylesheet" type="text/css" href="css/material-icons.css" />
	<link rel="stylesheet" type="text/css" href="css/muse-ui-loading.all.css" />
	<link rel="stylesheet" type="text/css" href="css/muse-ui-message.all.css" />
	<link rel="stylesheet" type="text/css" href="css/common.css" />

	<script src="js/jquery.min-1.11.3.js"></script>
	<script src="js/JSConstants.js"></script>
	<script src="js/JSBridge.js"></script>
	<script src="js/JSBridgeExt.js"></script>
	<script src="js/common.js"></script>
	<script src="js/vue.min.js"></script>
	<script src="js/mint.min.js"></script>
	<script src="js/muse-ui.js"></script>
	<script src="js/muse-ui-toast.js"></script>
	<script src="js/muse-ui-loading.js"></script>
	<script src="js/muse-ui-message.js"></script>

	<style type="text/css">
		/** position-info **/
		.position-info{
			margin:3px;
			padding: 3px;
			border: 1px solid #ddd;
			border-radius: 8px;
		}

		.position-info .head{
			padding-right: 3px;
		}

		.position-info .nickname{
			font-size: 15px;
			font-weight: 600;
		}

		.position-info .times{
			font-size: 14px;
			color: #999999;
		}

		.position-info .address{
			font-size: 14px;
			color: #777777;
		}

		.position-info .track{
			font-size: 14px;
			width: 60px;
			height: 35px;
		}

		/** button **/
		.add-care-person{
			font-size: 15px;
			width: 200px;
		}
	</style>
</HEAD>
<BODY>
	<div id="app" class="vue-mint-container">
		<mt-header fixed title="我关心的人"></mt-header>

		<div class="position-info">
			<table width="100%" border="0">
				<tr>
					<td rowspan="2" width="50" align="center" class="head">
						<img src="images/head1.png" width="48" height="48" alt="头像">
					</td>
					<td class="nickname">&nbsp;我自己</td>
					<td rowspan="2" width="80" align="center">
						<mt-button type="primary" size="normal" class="track" @click="viewTrack('me','我自己')">轨迹</mt-button>
					</td>
				</tr>
				<tr>
					<td class="times">&nbsp;{{ locationInfo.time }}</td>
				</tr>
				<tr>
					<td colspan="3" class="address">&nbsp;{{ locationInfo.address }}</td>
				</tr>
			</table>
		</div>

		<table width="100%">
			<tr>
				<td align="center" height="60">
					<mt-button type="primary" size="normal" class="add-care-person">添加要关心的人</mt-button>
				</td>
			</tr>
		</table>

		<table class="tabbar" width="100%">
			<tr>
				<td width="25%" align="center" class="tabbar-item" @click="changeTabPage('main.html')">
					<img src="images/home.jpg">
					<div class="tabbar-item-selected">主页</div>
				</td>
				<td width="25%" align="center" class="tabbar-item" @click="changeTabPage('contact.html')">
					<img src="images/alert.jpg">
					<div>紧急</div>
				</td>
				<td width="25%" align="center" class="tabbar-item">
					<img style="position:absolute; top:-15px; left:50%; margin-left:-25;" src="images/location.png">
					<div>&nbsp;</div>
				</td>
				<td width="25%" align="center" class="tabbar-item">
					<img src="images/message.jpg">
					<div>消息</div>
				</td>
				<td width="25%" align="center" class="tabbar-item">
					<img src="images/person.jpg">
					<div>我的</div>
				</td>
			</tr>
		</table>
	</div>

	<script>
		var nowDate = new Date();
		var y = nowDate.getFullYear();
		var m = nowDate.getMonth()+1;
		if(m < 10) m = "0" + m;
		var d = nowDate.getDate();
		if(d < 10) d = "0" + d;
		var h = nowDate.getHours();
		if(h < 10) h = "0" + h;
		var mi = nowDate.getMinutes();
		if(mi < 10) mi = "0" + mi;
		var s = nowDate.getSeconds();
		if(s < 10) s = "0" + s;

		nowDate = y + "-" + m + "-" + d + " " + h + ":" + mi + ":" + s;

		var vm = new Vue({
			el: '#app',
			data: {
				//广东省云浮市罗定市大路口附近
				locationInfo: {address:"", time:nowDate}
			},
			methods: {
				changeTabPage: function(pageURL){
					transferPage(pageURL);
				},
				viewTrack: function(userId, nickName){
					jsBridge.dispatchAction("LocationAction", JSON.stringify({"userId": userId, "nickName":nickName}), "viewTrack");
				}
			}
		})
	</script>

	<script type="text/javascript">
        function pageFinishCallback(){
			setInterval(function(){
				try{
					var obj = jsBridge.dispatchAction("LocationAction", JSON.stringify({}), "getCurrentPosition");
					vm.locationInfo = jQuery.parseJSON(obj);
				}catch(e){ }
			}, 3 * 1000);
        }
    </script>
</BODY>
</HTML>
